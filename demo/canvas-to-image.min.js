var saveAs=saveAs||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=function(){return e.URL||e.webkitURL||e},o=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in o,a=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},i=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),c=e.webkitRequestFileSystem,d=e.requestFileSystem||c||e.mozRequestFileSystem,u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},s="application/octet-stream",f=0,l=4e4,v=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,l)},p=function(e,t,n){t=[].concat(t);for(var o=t.length;o--;){var r=e["on"+t[o]];if("function"==typeof r)try{r.call(e,n||e)}catch(a){u(a)}}},w=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["ï»¿",e],{type:e.type}):e},g=function(t,u,l){l||(t=w(t));var g,y,m,h=this,S=t.type,b=!1,R=function(){p(h,"writestart progress write writeend".split(" "))},O=function(){if(y&&i&&"undefined"!=typeof FileReader){var o=new FileReader;return o.onloadend=function(){var e=o.result;y.location.href="data:attachment/file"+e.slice(e.search(/[,;]/)),h.readyState=h.DONE,R()},o.readAsDataURL(t),void(h.readyState=h.INIT)}if((b||!g)&&(g=n().createObjectURL(t)),y)y.location.href=g;else{var r=e.open(g,"_blank");void 0===r&&i&&(e.location.href=g)}h.readyState=h.DONE,R(),v(g)},E=function(e){return function(){return h.readyState!==h.DONE?e.apply(this,arguments):void 0}},A={create:!0,exclusive:!1};return h.readyState=h.INIT,u||(u="download"),r?(g=n().createObjectURL(t),void setTimeout(function(){o.href=g,o.download=u,a(o),R(),v(g),h.readyState=h.DONE})):(e.chrome&&S&&S!==s&&(m=t.slice||t.webkitSlice,t=m.call(t,0,t.size,s),b=!0),c&&"download"!==u&&(u+=".download"),(S===s||c)&&(y=e),d?(f+=t.size,void d(e.TEMPORARY,f,E(function(e){e.root.getDirectory("saved",A,E(function(e){var n=function(){e.getFile(u,A,E(function(e){e.createWriter(E(function(n){n.onwriteend=function(t){y.location.href=e.toURL(),h.readyState=h.DONE,p(h,"writeend",t),v(e)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&O()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=h["on"+e]}),n.write(t),h.abort=function(){n.abort(),h.readyState=h.DONE},h.readyState=h.WRITING}),O)}),O)};e.getFile(u,{create:!1},E(function(e){e.remove(),n()}),E(function(e){e.code===e.NOT_FOUND_ERR?n():O()}))}),O)}),O)):void O())},y=g.prototype,m=function(e,t,n){return new g(e,t,n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return n||(e=w(e)),navigator.msSaveOrOpenBlob(e,t||"download")}:(y.abort=function(){var e=this;e.readyState=e.DONE,p(e,"abort")},y.readyState=y.INIT=0,y.WRITING=1,y.DONE=2,y.error=y.onwritestart=y.onprogress=y.onwrite=y.onabort=y.onerror=y.onwriteend=null,m)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content),downloadAs=downloadAs||function(){function e(e,t,n){t=t||"",n=n||512;for(var o=atob(e),r=[],a=0;a<o.length;a+=n){for(var i=o.slice(a,a+n),c=new Array(i.length),d=0;d<i.length;d++)c[d]=i.charCodeAt(d);var u=new Uint8Array(c);r.push(u)}var s=new Blob(r,{type:t});return s}function t(t,n){n+=".jpg";var o=t.toDataURL("image/jpeg",1);o=o.replace(/^data:image\/jpeg;base64,/,"");var r=e(o,"image/jpeg");saveAs(r,n)}function n(t,n){n+=".png";var o=t.toDataURL();o=o.replace(/^data:image\/png;base64,/,"");var r=e(o,"image/png");saveAs(r,n)}var o=function(e,o,r){var a=document.getElementById(e);switch(o=o||"image",r&&(r=r.toLowerCase()),r){case"jpg":t(a,o);break;case"png":n(a,o);break;default:n(a,o)}};return o}();"undefined"!=typeof module&&module.exports?module.exports=downloadAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define([],function(){return downloadAs});